---
title: "Fermer une position"
sidebarTitle: "Close position"
description: "Découvrez comment gérer automatiquement vos positions de trading via notre API dédiée aux algorithmes. Notre API algorithme permet de créer, fermer et modifier des positions de trading automatiquement. Vous pouvez ainsi développer vos propres stratégies de trading et les exécuter via des requêtes API. L'endpoint principal vous permet de réaliser trois actions essentielles : ouvrir une position (activation), fermer une position (close) ou modifier une position existante (update)."
---

### **Endpoint de la requête**

Envoyez uniquement une requête POST au format JSON à l'URL suivante :

```bash Endpoint de la requête
https://api.cm5-markets.com/v3/algorithme
```

## **Fermer une position de trading**

Cette action vous permet de fermer une position existante en spécifiant uniquement son identifiant.

## Fermeture d'une position

```json Fermeture d'une position
{
  "api-key": "votre_cle_api_ici",
  "api-secret": "votre_cle_secrete_ici",
  "object": "close",
  "id": "12345678"
}
```

## Fermer tout les perdants

```json Fermer tout les perdants
{
  "api-key": "votre_cle_api_ici",
  "api-secret": "votre_cle_secrete_ici",
  "object": "close-advanced",
  "type-close": "perte"
}
```

## Fermer tout les gagnants

```json Fermer tout les gagnants
{
  "api-key": "votre_cle_api_ici",
  "api-secret": "votre_cle_secrete_ici",
  "object": "close-advanced",
  "type-close": "profit"
}
```

## Fermer tout les positions

```json Fermer tout les positions
{
  "api-key": "votre_cle_api_ici",
  "api-secret": "votre_cle_secrete_ici",
  "object": "close-advanced",
  "type-close": "all"
}
```

<Check>
  Réponse de fermeture réussie
</Check>

```json Réponse de fermeture réussie
{
  "status": "success",
  "data": {
    "message": "Position fermée avec succès",
    "trade_id": "12345678",
    "close_price": 1.0805,
    "profit": 20.00
  }
}
```

---

## **Explication des champs :**

`"api-key"` et "api-secret" : vos clés d'authentification fournies par la plateforme.

`"object"` : définit l'action à effectuer ("activation", "close" ou "update").

`"type"` : type de compte ("Réel" ou "Démo") - requis uniquement pour l'activation.

`"id"` : identifiant de la position pour les opérations "close" et "update".

## **Exemple de code complet (PHP cURL)**

```php Exemple d'activation d'une position (PHP)
<?php
$endpoint = 'https://api.cm5-markets.com/v3/algorithme';

// Exemple d'ouverture d'une position
$payload = [
  'api-key'    => 'votre_cle_api_ici',
  'api-secret' => 'votre_cle_secrete_ici',
  'object'     => 'activation',
  'type'       => 'Réel',
  'lot'        => 0.1,
  'mode'       => 'Buy ou Sell',
  'symbol'     => 'EURUSD',
  'tp'         => 1.0850,
  'sl'         => 1.0750
];

$ch = curl_init($endpoint);
curl_setopt_array($ch, [
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_POST           => true,
  CURLOPT_HTTPHEADER     => ['Content-Type: application/json'],
  CURLOPT_POSTFIELDS     => json_encode($payload, JSON_UNESCAPED_UNICODE),
  CURLOPT_TIMEOUT        => 20,
]);

$response = curl_exec($ch);
if ($response === false) {
  $error = curl_error($ch);
  curl_close($ch);
  die('Erreur cURL: ' . $error);
}
$http = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

// Traiter la réponse
$result = json_decode($response, true);
if (isset($result['status']) && $result['status'] === 'success') {
  echo "Position ouverte avec succès! ID: " . $result['data']['trade_id'];
} else {
  echo "Erreur: " . ($result['message'] ?? "Erreur inconnue");
}
?>
```